<!--商品詳細-->
<div class="container">
	<div class="row">
		<div class="col-xs-3">
			<!--ジャンル検索欄-->
			<table class="table table-bordered">
				<tr>
					<th><strong>ジャンル検索</strong></th>
				</tr>
				<% @genres.each do |genre| %>
				<tr>
					<td><%= link_to genre.name, genre_path(genre.id) %></td>
				</tr>
				<% end %>
			</table>
			<table class="table table-bordered">
				<tr>
					<th colspan="2"><strong>人気ランキング</strong></th>
				</tr>
				<% @all_ranks.each.with_index(1) do |item, i|%>
                <tr>
					<th>No.<%= i %></th>
					<td>
						<%= link_to item_path(item.id) do  %>
							<%= attachment_image_tag item, :img, format: 'jpeg', fallback: "no_image.jpg", size: "30x30" %>
							<p><%= item.name %><p>
						<% end %>
					</td>
				</tr>
				<% end %>
			</table>
		</div>
		<div class="col-xs-4">
			<div class="item-image">
        		<%= attachment_image_tag @item, :img, format: 'jpeg', fallback: "no_image.jpg", size: "300x300" %>
			</div>
		</div>
		<div class="col-xs-5" style="height:300px; width:300px;">
			<div class="item-name" style="margin-top:100px; border-bottom:1px solid #000;">
				<h4><strong><%= @item.name %></strong></h4>
			</div>
			<div class="item-detail" style="margin-top:10px;">
				<p><%= @item.detail %></p>
			</div>
			<div class="item-price-with-tax">
				<p><%= @item.price %>(<%= price_include_tax(@item.price) %>)</p>
			</div>
			<div class="like">
			<% if member_signed_in? %>
				<% if @item.liked_by?(current_member) %>
					<%= link_to item_likes_path(@item), method: :delete do %>
						<i class="fa fa-heart" aria-hidden="true" style="color: red;"></i>
						<%= @item.likes.count %>Likes
					<% end %>
				<% else %>
					<%= link_to item_likes_path(@item), method: :post do %>
						<i class="fa fa-heart" aria-hidden="true"></i>
						<%= @item.likes.count %>Likes
					<% end %>
				<% end %>
			<% else %>
				<i class="fa fa-heart"></i>
				<%= @item.likes.count %>Likes
			<% end %>
			</div>
			<%= form_with(model: [@item, @cart], local:true, url:{controller:'members/carts', action: 'create'}) do |f| %>
			    <%= f.label :ご購入個数 %>
			    <%= f.number_field :amount, value: 1 ,min:1, max:99 %>個
			    <%= f.hidden_field :item_id, value: @item.id  %>
			    <%= f.submit "カートに入れる", class: "btn btn-danger" %>
			 <% end %>
		</div>
	</div>
</div>